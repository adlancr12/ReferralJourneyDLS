<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Performance | Monitoring</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-shadow { box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05); }
        .gradient-bg { background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <nav class="gradient-bg text-white py-4 px-6 sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-500 p-2 rounded-lg">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                </div>
                <div>
                    <h1 class="text-lg font-extrabold tracking-tight leading-none uppercase">Pemasar Monitoring</h1>
                    <span class="text-[10px] text-indigo-300 font-medium tracking-[0.2em]">ANALYTICS DASHBOARD</span>
                </div>
            </div>
            
            <div class="flex items-center gap-4 bg-white/10 p-1.5 px-4 rounded-full border border-white/20">
                <div class="flex flex-col">
                    <span class="text-[9px] font-bold text-indigo-200 uppercase tracking-tighter">Periode</span>
                    <select id="bulanFilter" class="bg-transparent text-sm font-bold outline-none cursor-pointer">
                        <option value="Januari" class="text-slate-800">Januari 2026</option>
                        <option value="Februari" class="text-slate-800">Februari 2026</option>
                        <option value="Maret" class="text-slate-800">Maret 2026</option>
                    </select>
                </div>
                <div class="h-8 w-px bg-white/20 mx-1"></div>
                <button onclick="refreshDashboard()" class="bg-white text-indigo-900 hover:bg-indigo-50 px-6 py-2 rounded-full font-bold text-xs transition-all shadow-sm active:scale-95">
                    UPDATE DATA
                </button>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto p-4 md:p-8">
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
            <div class="bg-white p-6 rounded-2xl card-shadow border border-slate-100 group transition-all hover:translate-y-[-4px]">
                <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest mb-2">Total Aktif</p>
                <div class="flex items-end justify-between">
                    <h2 id="summaryAktif" class="text-3xl font-extrabold text-slate-800 leading-none">0</h2>
                    <span class="text-indigo-500 bg-indigo-50 p-2 rounded-lg"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a7 7 0 00-7 7v1h11v-1a7 7 0 00-7-7z"></path></svg></span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl card-shadow border border-slate-100 group transition-all hover:translate-y-[-4px]">
                <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest mb-2">Sudah Input</p>
                <div class="flex items-end justify-between">
                    <h2 id="summarySudah" class="text-3xl font-extrabold text-emerald-600 leading-none">0</h2>
                    <span class="text-emerald-500 bg-emerald-50 p-2 rounded-lg"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"></path></svg></span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl card-shadow border border-slate-100 group transition-all hover:translate-y-[-4px]">
                <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest mb-2">Belum Input (GAP)</p>
                <div class="flex items-end justify-between">
                    <h2 id="summaryBelum" class="text-3xl font-extrabold text-rose-600 leading-none">0</h2>
                    <span class="text-rose-500 bg-rose-50 p-2 rounded-lg"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"></path></svg></span>
                </div>
            </div>

            <div class="bg-indigo-900 p-6 rounded-2xl shadow-xl border border-indigo-800 transition-all hover:translate-y-[-4px]">
                <p class="text-indigo-300 text-[10px] font-bold uppercase tracking-widest mb-2">Persentase GAP</p>
                <div class="flex items-end justify-between">
                    <h2 id="summaryPersen" class="text-3xl font-extrabold text-white leading-none">0%</h2>
                    <div class="w-10 h-10 flex items-center justify-center bg-white/10 rounded-full">
                        <div class="w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin-slow"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white p-8 rounded-3xl card-shadow border border-slate-100 mb-10">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                <div>
                    <h3 class="text-lg font-extrabold text-slate-800 tracking-tight">Visualisasi Data Wilayah</h3>
                    <p class="text-xs text-slate-400 font-medium">Perbandingan Stacked Bar: Total vs Progres Input</p>
                </div>
                <div class="flex gap-4">
                    <div class="flex items-center gap-2"><span class="w-3 h-3 rounded bg-[#2563eb]"></span><span class="text-[10px] font-bold text-slate-500 uppercase">Target</span></div>
                    <div class="flex items-center gap-2"><span class="w-3 h-3 rounded bg-[#10b981]"></span><span class="text-[10px] font-bold text-slate-500 uppercase">Input</span></div>
                    <div class="flex items-center gap-2"><span class="w-3 h-3 rounded bg-[#f43f5e]"></span><span class="text-[10px] font-bold text-slate-500 uppercase">Gap</span></div>
                </div>
            </div>
            <div class="h-[400px]">
                <canvas id="mainChart"></canvas>
            </div>
        </div>

        <div class="bg-white rounded-3xl card-shadow border border-slate-100 overflow-hidden">
            <div class="p-6 px-8 border-b border-slate-50 bg-slate-50/50">
                <h3 class="font-extrabold text-slate-700 text-sm uppercase tracking-wider">Detail Per Wilayah (1-17)</h3>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="text-slate-400 text-[11px] font-bold uppercase tracking-[0.15em]">
                            <th class="px-8 py-5 border-b border-slate-50">Region Name</th>
                            <th class="px-4 py-5 border-b border-slate-50 text-center">Aktif</th>
                            <th class="px-4 py-5 border-b border-slate-50 text-center">Sudah Input</th>
                            <th class="px-4 py-5 border-b border-slate-50 text-center">GAP (Belum)</th>
                            <th class="px-8 py-5 border-b border-slate-50 text-right">Status %</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody" class="divide-y divide-slate-50 font-medium text-sm">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let myChart;

        function refreshDashboard() {
            const tableBody = document.getElementById('tableBody');
            let labels = [];
            let dataAktif = [];
            let dataSudah = [];
            let dataBelum = [];
            let tableRows = '';

            let totalAktifNasional = 0;
            let totalSudahNasional = 0;
            let totalBelumNasional = 0;

            for (let i = 1; i <= 17; i++) {
                const aktif = Math.floor(Math.random() * 50) + 150;
                const sudah = Math.floor(Math.random() * (aktif - 20)) + 10;
                const belum = aktif - sudah;
                const persenBelum = ((belum / aktif) * 100).toFixed(1);

                totalAktifNasional += aktif;
                totalSudahNasional += sudah;
                totalBelumNasional += belum;

                labels.push('W' + (i < 10 ? '0' + i : i));
                dataAktif.push(aktif);
                dataSudah.push(sudah);
                dataBelum.push(belum);

                const statusColor = persenBelum > 30 ? 'bg-rose-50 text-rose-600' : 'bg-emerald-50 text-emerald-600';
                const statusDot = persenBelum > 30 ? 'bg-rose-500' : 'bg-emerald-500';

                tableRows += `
                    <tr class="hover:bg-slate-50/80 transition-all duration-200">
                        <td class="px-8 py-5">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 text-[10px] font-bold">
                                    ${i}
                                </div>
                                <span class="font-bold text-slate-700">Wilayah ${i < 10 ? '0' + i : i}</span>
                            </div>
                        </td>
                        <td class="px-4 py-5 text-center font-bold text-slate-500">${aktif}</td>
                        <td class="px-4 py-5 text-center font-extrabold text-emerald-600">${sudah}</td>
                        <td class="px-4 py-5 text-center font-extrabold text-rose-500">${belum}</td>
                        <td class="px-8 py-5 text-right">
                            <span class="${statusColor} px-3 py-1.5 rounded-full text-[11px] font-black inline-flex items-center gap-2">
                                <span class="w-1.5 h-1.5 rounded-full ${statusDot}"></span>
                                ${persenBelum}%
                            </span>
                        </td>
                    </tr>
                `;
            }

            tableBody.innerHTML = tableRows;

            document.getElementById('summaryAktif').innerText = totalAktifNasional.toLocaleString();
            document.getElementById('summarySudah').innerText = totalSudahNasional.toLocaleString();
            document.getElementById('summaryBelum').innerText = totalBelumNasional.toLocaleString();
            document.getElementById('summaryPersen').innerText = ((totalBelumNasional/totalAktifNasional)*100).toFixed(1) + "%";

            // Sesuai permintaan: Tidak merubah tampilan diagram (tipe & stack tetap)
            if (myChart) myChart.destroy();
            const ctx = document.getElementById('mainChart').getContext('2d');
            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Total Pemasar Aktif',
                            data: dataAktif,
                            backgroundColor: '#2563eb', 
                            stack: 'Stack 0',
                            borderRadius: 4
                        },
                        {
                            label: 'Sudah Input',
                            data: dataSudah,
                            backgroundColor: '#10b981', 
                            stack: 'Stack 1',
                            borderRadius: 4
                        },
                        {
                            label: 'Belum Input (GAP)',
                            data: dataBelum,
                            backgroundColor: '#f43f5e', 
                            stack: 'Stack 1',
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false } // Legend dipindah ke custom HTML di atas chart agar lebih rapi
                    },
                    scales: {
                        y: { 
                            beginAtZero: true, 
                            grid: { color: '#f1f5f9', drawBorder: false },
                            ticks: { color: '#94a3b8', font: { size: 10, weight: '600' } }
                        },
                        x: { 
                            grid: { display: false },
                            ticks: { color: '#64748b', font: { size: 10, weight: '700' } }
                        }
                    }
                }
            });
        }

        window.onload = refreshDashboard;
    </script>

    <style>
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 3s linear infinite;
        }
    </style>
</body>
</html>